{"filter":false,"title":"uPartitionFunctions.pas","tooltip":"/trunk/Modules/Disk/uPartitionFunctions.pas","undoManager":{"mark":1,"position":1,"stack":[[{"group":"doc","deltas":[{"start":{"row":170,"column":4},"end":{"row":195,"column":4},"action":"remove","lines":["","","function GetFirstSector(const DriveLetter: String): Int64;","var","  hdrive: Cardinal;","  dwBytesReturned: DWORD;","  Status: Longbool;","  FirstSectorInfo: RETRIEVAL_POINTER_BASE;","begin","  fillchar(result, SizeOf(result), #0);","","  hdrive := CreateFile(PChar('\\\\.\\' + DriveLetter), GENERIC_READ or GENERIC_WRITE,","                    FILE_SHARE_READ or FILE_SHARE_WRITE, nil, OPEN_EXISTING, 0, 0);","","  If GetLastError = 0 Then","  begin","    Status := DeviceIoControl(hdrive, FSCTL_GET_RETRIEVAL_POINTER_BASE, nil, 0, @FirstSectorInfo, SizeOf(RETRIEVAL_POINTER_BASE), dwBytesReturned, nil);","    if Status then","    begin","      result := FirstSectorInfo.FileAreaOffset.QuadPart;","    end","    else","      result := 0;","    CloseHandle(hdrive);","  end;","end;"]}]}],[{"group":"doc","deltas":[{"start":{"row":62,"column":65},"end":{"row":63,"column":58},"action":"remove","lines":["","function GetFirstSector(const DriveLetter: String): Int64;"]}]}]]},"ace":{"folds":[],"scrolltop":1965,"scrollleft":0,"selection":{"start":{"row":112,"column":68},"end":{"row":113,"column":8},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":139,"state":"start","mode":"ace/mode/pascal"}},"timestamp":1427415841705,"hash":"8751fb2b0e006199d44208b3c6fb4d19295dc4fc"}